<!--
  Generated template for the Login page.

  See http://ionicframework.com/docs/v2/components/#navigation for more info on
  Ionic pages and navigation.
-->
<ion-header padding >
</ion-header>
<ion-content>
  <div padding >
    
    <ion-segment color={{theme}} style="background-color:#001a33;" [(ngModel)]="authType" class="headerLogo">
      <ion-avatar item-left>
      <img src="assets/img/Icon-40.png">
    </ion-avatar>
   
      <ion-segment-button value="login">
        Login
      </ion-segment-button>
      <ion-segment-button value="signup">
        Signup
      </ion-segment-button>
       <ion-avatar item-right>
      <img src="assets/img/dliIcon.png">
    </ion-avatar>
    </ion-segment>
    
  </div>

  <div [ngSwitch]="authType">


    <form *ngSwitchCase="'login'" #f="ngForm" [formGroup]="logform" (ngSubmit)="login()">

      <ion-item>
        <ion-label><ion-icon name="person"></ion-icon></ion-label>
        <ion-input type="text"  autocorrect="off" autocapitalize="none" formControlName="username" placeholder="Username" clearOnEdit="true"></ion-input>
      </ion-item>
      <ion-item>
        <ion-label><ion-icon name="lock"></ion-icon></ion-label>
        <ion-input  type="password" formControlName="password" placeholder="Password" clearOnEdit="true"></ion-input>
      </ion-item>

      <ion-item>
        <ion-label ><ion-icon name="globe" padding-right></ion-icon>Select a Language</ion-label>
        <ion-select formControlName="site" >
           <ion-option *ngFor="let site of sites" [value]='site'>{{site.language=="Mandarin"  ?'' : site.language}}  {{site.language.toLowerCase()==site.name.toLowerCase() ? '' : site.name}} 
           </ion-option>
        </ion-select>
      </ion-item>

      <div padding>
        <button ion-button block color={{theme}} type="submit" [disabled]="!f.form.valid">Login</button>
      </div>

    </form>
    <div *ngSwitchCase="'login'">
      <ion-item>
        <button ion-button color={{theme}} clear value="forgotPass" (click)="showForgotPassPrompt()">
              Forgot Password?  
            </button>
        <button ion-button color={{theme}} clear item-right value="forgotUser" (click)="showForgotUserPrompt()">
              Forgot Username?
            </button>

      </ion-item>
    </div>
    <form *ngSwitchCase="'signup'" #fs="ngForm" [formGroup]="signform" (ngSubmit)="signup()">

      <ion-item>
        <ion-input type="text" formControlName="username" autocapitalize="none" placeholder="Username" clearInput></ion-input>
      </ion-item>
      <ion-item>
        <ion-input type="text" formControlName="firstname" placeholder="First Name" clearInput></ion-input>
      </ion-item>
      <ion-item>
        <ion-input type="text" formControlName="lastname" placeholder="Last Name" clearInput></ion-input>
      </ion-item>
      <ion-item>
        <ion-input type="email" formControlName="email" placeholder="Email" clearInput></ion-input>
      </ion-item>
      
      <ion-item>
        <ion-label>Affiliation</ion-label>
        <ion-select tappable formControlName="affiliation" [(ngModel)]="affiliation" interface="action-sheet">
          <ion-option value="DLIFLC" selected="true">DLI Foreign Language Center</ion-option>
          <ion-option value="DLI-W">DLI-Washington</ion-option>
          <ion-option value="LTD">Language Training Detachment</ion-option>
          <ion-option value="MTT">Mobile Training Team</ion-option>
          <ion-option value="MIT-LL">MIT - Lincoln Lab</ion-option>
          <ion-option value="OTHER">Others</ion-option>
        </ion-select>
      </ion-item>
     <!-- <ion-item>
        <ion-label>Gender</ion-label>
        <ion-select tappable formControlName="gender" [(ngModel)]="gender" interface="action-sheet">
          <ion-option value="male" selected="true">Male</ion-option>
          <ion-option value="female">Female</ion-option>
        </ion-select>
      </ion-item> -->
      <div padding>
        <button ion-button block color={{theme}} type="submit" [disabled]="!fs.form.valid">Signup</button>
      </div>

    </form>
  </div>

  <div padding>
    <p *ngIf="error" class="error">{{ error._body }}</p>
  </div>
 
</ion-content>
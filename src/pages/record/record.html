<!--
  Generated template for the Record page.

  See http://ionicframework.com/docs/v2/components/#navigation for more info on
  Ionic pages and navigation.
-->
<ion-header no-padding>
  <!-- <ion-row style="background-color:#001a33;">
    <ion-col col-2>
      <ion-avatar item-left>
        <img src="assets/img/Icon-40.png">
      </ion-avatar>
    </ion-col>
    <ion-col col-8>
      <ion-label text-center color="light">{{siteName}} - Simplified Pronunciation Feedback</ion-label>
    </ion-col>
    <ion-col col-2>
      <ion-avatar item-right>
        <img src="assets/img/dliIcon.png">
      </ion-avatar>
    </ion-col>
  </ion-row>-->
  <ion-navbar hideBackButton color={{theme}}>
    <ion-buttons left>
      <button ion-button (click)="close()">
        <ion-icon name="arrow-back">&nbsp;Back</ion-icon>
      </button>
    </ion-buttons>
    <ion-title text-center tappable (click)="close()">{{siteName}} - ({{allItems.length}} items)</ion-title>
    <!--  <button ion-button round (click)="close()">Close</button> -->
  </ion-navbar>

</ion-header>

<ion-content>
    <audio [src]=""  #audio></audio>
     
  <ion-card>
    <ion-slides no-margin #mySlider (ionSlideDidChange)="playSlide()" (ionSlideReachEnd)="getNextItem()" >
      <ion-slide *ngFor="let item of items ;  let id=index" >
        <h3 style="font-size:80%; text-align:left; color:darkred;">&nbsp;{{ item.lesson }} {{item.lessonId }} &nbsp;{{ item.sublesson }} {{item.sublessonId }}&nbsp; ID:{{item.id }}</h3>
        <!-- <button ion-button right  text-right large clear  (click)="context(item)" ><ion-icon  name="quote">Context Sentence</ion-icon> </button> -->
        <h1 dir={{rtl}} id={{item.id}} padding tappable (click)="context(item,id,$event)" style="color:blue; " *ngIf="isContext">
          &nbsp;&nbsp;{{ item.ct }} </h1>
        <h2 no-padding dir={{rtl}} id={{item.id}} padding tappable (click)="context(item,id,$event)" style="color:rgb(234, 0, 255);" *ngIf="isBoth  || isEnglish">
          &nbsp;&nbsp;{{ item.ctr }} </h2>

        <h1 tappable wrap (click)="man(item,id,$event)" style="color:green; text-align:center;"> {{ item.fl }}</h1>
        <h2 tappable no-padding wrap (click)="playEnglish(item)" *ngIf="isBoth || isEnglish"> {{item.en }}</h2>
        <h2> {{item.tl }}</h2>
        <!--<p padding tappable wrap (click)="context(item)" style="color:blue;" >Context: {{item.ct }} </p> 
        <div padding tappable wrap  id=recordFl{{item.id}} text-wrap></div> -->
        <div padding-left padding-right (click)="playRecord(item)" id=recordPh{{item.id}} text-wrap></div>
        <div *ngIf="isSpinner">
          <ion-spinner name="bubbles"></ion-spinner>
        </div>
        <ion-fab bottom  color="light" right>
            <button ion-fab mini clear color="light" > <div id=container{{item.id}}  (click)="playRecord(item)"></div>
            </button>
        
          </ion-fab>
          
        <ion-row style="padding:50px">
            
          <ion-col >
          <!--    <button  ion-button round ion-long-press block color={{recordColor}} [interval]="400"   (onPressStart)="record(item)" 
            (onPressEnd)="endRecord(item)" >  
            <ion-icon name={{recordIcon}}>&nbsp;{{recordTitle}}</ion-icon>
          </button> -->
            <button ion-button block round color={{recordColor}} (click)="record(item)" *ngIf="!item.isRecord">
              <ion-icon name={{recordIcon}}>&nbsp;{{recordTitle}}</ion-icon>
            </button>
            <button ion-button block round color={{recordColor}} (click)="endRecord(item)" *ngIf="item.isRecord">
              <ion-icon name={{recordIcon}}>&nbsp;{{recordTitle}}</ion-icon>
            </button>
          </ion-col>
         <!--   <ion-col  col-4>
           <button *ngIf="item.h[item.h.length-1]==='Y'" ion-button outline block color="secondary" (click)="playRecord(item)">
              {{(item.scores[item.scores.length-1].valueOf() * 100).toFixed(0)}}&nbsp;
              <ion-icon name="checkmark-circle"></ion-icon>
            </button>
            <button *ngIf="item.h[item.h.length-1]==='N' && item.scores[item.scores.length-1].valueOf()>0" ion-button outline block color="danger"
              (click)="playRecord(item)">
              {{(item.scores[item.scores.length-1].valueOf() * 100).toFixed(0)}}&nbsp;
              <ion-icon name="close-circle"></ion-icon>
            </button>
            <button *ngIf="item.h[item.h.length-1]==='N' && item.scores[item.scores.length-1].valueOf()==-1" ion-button outline block
              color="danger" (click)="playRecord(item)">
              0&nbsp;
              <ion-icon name="close-circle"></ion-icon>
            </button>
            <button *ngIf="item.h.length===0" ion-button block color="light">

              <ion-icon name="mic-off"></ion-icon>
            </button>
          </ion-col>
            <ion-col *ngIf="item.s>0 &&  item.scores.length==0" col-4>
             
         <button  *ngIf="item.h[item.h.length-1]==='Y'" ion-button outline block color="secondary" (click)="playRecord(item)">
              {{item.s}}&nbsp;
              <ion-icon name="checkmark-circle"></ion-icon>
            </button>
            <button  *ngIf="item.h[item.h.length-1]==='N'" ion-button outline block color="danger" (click)="playRecord(item)">
              {{item.s}}&nbsp;
              <ion-icon name="close-circle"></ion-icon>
            </button>
            <button  *ngIf="item.h[item.h.length-1]==='N'" ion-button outline block color="danger" (click)="playRecord(item)">
              0&nbsp;
              <ion-icon name="close-circle"></ion-icon>
            </button>
            <button  *ngIf="item.h.length===0" ion-button block color="light">

              <ion-icon name="mic-off"></ion-icon>
            </button>
          </ion-col> -->
        </ion-row>
     
      </ion-slide>
    </ion-slides>
  </ion-card>

</ion-content>
<ion-footer>

  <ion-list>
    <ion-item-sliding>
      <ion-item>
        <ion-card no-padding>
          <ion-row no-padding>
            <ion-col col-2>
              <button ion-button outline block color={{theme}} (click)="slidePrevious()">
                <ion-icon name="skip-backward"></ion-icon>
              </button>

            </ion-col>
            <ion-col col-2>
              <button ion-button outline block color={{theme}} (click)="slideNext()">
                <ion-icon name="skip-forward"></ion-icon>
              </button>
            </ion-col>
            <ion-col col-2>
              <button no-padding ion-button block outline color="light" (click)="changeSpeed(item)" *ngIf="!selectedSlow">
                <ion-icon name="turtle-press"></ion-icon>
              </button>
              <button no-padding ion-button block outline color={{theme}} (click)="changeSpeed(item)" *ngIf="selectedSlow">
                <ion-icon name="turtle"></ion-icon>
                <!-- for outline customizable
                <ion-icon  name="turtle-press" ></ion-icon>-->
              </button>
            </ion-col>
            <ion-col col-2>
              <button ion-button outline block (click)="both()" color={{theme}} *ngIf="isBoth">Both </button>
              <button ion-button outline block (click)="both()" color="light" style="color:gray; opacity:0.75;" *ngIf="!isBoth">Both </button>


            </ion-col>
            <ion-col col-2>
              <button ion-button outline block (click)="startAutoPlay()" color={{theme}} *ngIf="!isAutoPlay">
                <ion-icon name="play"></ion-icon>
              </button>
              <button ion-button outline block (click)="stopAutoPlay()"  color={{theme}} *ngIf="isAutoPlay">
                <ion-icon name="square"></ion-icon>
              </button>
            </ion-col>
            <ion-col col-2>
              <button ion-button outline block (click)="shuffle()" color={{theme}} *ngIf="!isShuffle">
                <ion-icon name="shuffle"></ion-icon>
              </button>
              <button ion-button outline block (click)="stopShuffle()" color={{theme}} *ngIf="isShuffle">
                <ion-icon name="square"></ion-icon>
              </button>
            </ion-col>
          </ion-row>
        </ion-card>
      </ion-item>
      <ion-item-options side="right">
        <button ion-button color="primary" (click)="toggleEnglish()">
          <ion-icon name="close-circle"></ion-icon>
          {{englishLabel}}
        </button>
        <button ion-button color="secondary" (click)="toggleContext()">
          <ion-icon name="text"></ion-icon>
          {{contextLabel}}
        </button>
      </ion-item-options>
    </ion-item-sliding>
  </ion-list>
</ion-footer>